# LEGEAI environment configuration
# NOTE: This file is not committed. Keep secrets here for local/dev.

# --- Backend core ---
# Toggle DB mode. Set to true only when DATABASE_URL is correctly configured.
USE_DB=true

# PostgreSQL connection string for SQLAlchemy/asyncpg.
# For Supabase, replace YOUR_SUPABASE_DB_PASSWORD and then set USE_DB=true.
# Example (Supabase):
#   Host:     db.kjfemjomqfgoohradasy.supabase.co
#   Port:     5432
#   Database: postgres
#   User:     postgres
#   Pass:     <YOUR_SUPABASE_DB_PASSWORD>
# Supabase Session Pooler (IPv4, more reliable on Windows)
# Note: For pooler, username format is postgres.[project-ref]

DATABASE_URL=postgresql+asyncpg://postgres.kjfemjomqfgoohradasy:wf2bMc4NbODtDN09@aws-1-us-west-1.pooler.supabase.com:5432/postgres

# Redis (optional). If not running redis locally, set REDIS_ENABLED=false.
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379/0

# JWT secret used for signing tokens generated by the backend.
# Regenerated now for you. Replace if you need to rotate.
JWT_SECRET_KEY=4e66d19e07b64a7f9cccf0b4b88a0c1ba8f2a8c9a6b7c44c98d1a91f39f0e32b

# --- DocuSeal ---
DOCUSEAL_API_KEY=mqxLjSBL9HBFGmAUXf7QwhCLQCuMHcmhhKLnfbB5PzW
# Optional: if not set, the API will auto-discover the first template
DOCUSEAL_TEMPLATE_ID=
DOCUSEAL_FORM_BASE=https://docuseal.com
DOCUSEAL_API_BASE=https://api.docuseal.com

# --- API base for the frontend ---
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000/v1
# CORS: frontend origins allowed to call the API
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000


# --- Supabase (provided) ---
# Frontend (Next.js) uses NEXT_PUBLIC_* to expose values to the client.
NEXT_PUBLIC_SUPABASE_URL=https://kjfemjomqfgoohradasy.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtqZmVtam9tcWZnb29ocmFkYXN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMTY4MzUsImV4cCI6MjA3NzY5MjgzNX0.aHETI_3F-PN6mhsTysfNd4CTGj_Z7tNuhUPMkOPw7yE
# Back-end copies (not used by the current code, but kept for clarity)
SUPABASE_URL=https://kjfemjomqfgoohradasy.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtqZmVtam9tcWZnb29ocmFkYXN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMTY4MzUsImV4cCI6MjA3NzY5MjgzNX0.aHETI_3F-PN6mhsTysfNd4CTGj_Z7tNuhUPMkOPw7yE

```bash
# Meta Marketing API Integration
META_APP_ID=1428732881978927
META_APP_SECRET=4f3407c364d49f3870f1891249f4fdb7
META_REDIRECT_URI=http://localhost:8000/v1/integrations/meta/callback
META_VERIFY_TOKEN=legeai_meta_webhook_2024
META_API_VERSION=v21.0
```

**Replace:**
- `YOUR_APP_ID_HERE` with your actual App ID
- `YOUR_APP_SECRET_HERE` with your actual App Secret

---

# --- Notes ---
# 1) To enable DB persistence with Supabase:
#    - Set your real Supabase Postgres password in DATABASE_URL above
#    - Flip USE_DB=true
#    - Run: .\.venv\Scripts\python.exe -m alembic -c backend\alembic.ini upgrade head
#    - Then seed accounts: .\.venv\Scripts\python.exe .\create_test_accounts_api.py
# 2) If you donâ€™t have a DB password yet: in Supabase Dashboard -> Settings -> Database -> "Connection string" -> copy the URI and paste into DATABASE_URL.
# 3) This .env is read automatically by backend (load_dotenv) and by run_backend.ps1.

